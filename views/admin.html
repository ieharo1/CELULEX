<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CELULEX Admin | Panel de Administración</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css" />
    <style>
      :root {
        --primary: #2563eb;
        --primary-dark: #1d4ed8;
        --primary-light: #3b82f6;
        --secondary: #64748b;
        --dark: #1e293b;
        --light: #f8fafc;
        --border: #e2e8f0;
        --success: #16a34a;
        --danger: #dc2626;
        --warning: #f59e0b;
      }

      * {
        font-family: 'Outfit', sans-serif;
      }

      body {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        min-height: 100vh;
      }

      .admin-sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: 260px;
        background: var(--dark);
        padding: 25px 20px;
        display: flex;
        flex-direction: column;
        z-index: 100;
      }

      .admin-sidebar .brand {
        font-size: 1.75rem;
        font-weight: 800;
        background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 40px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .admin-sidebar .nav-link {
        color: #94a3b8;
        padding: 14px 18px;
        border-radius: 12px;
        margin-bottom: 8px;
        font-weight: 500;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .admin-sidebar .nav-link:hover,
      .admin-sidebar .nav-link.active {
        background: rgba(37, 99, 235, 0.15);
        color: #60a5fa;
      }

      .admin-sidebar .nav-link i {
        font-size: 1.25rem;
      }

      .admin-main {
        margin-left: 260px;
        padding: 30px 40px;
      }

      .admin-header {
        background: white;
        border-radius: 20px;
        padding: 24px 30px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .admin-header h1 {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--dark);
        margin: 0;
      }

      .admin-card {
        background: white;
        border-radius: 20px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .admin-card-header {
        background: linear-gradient(135deg, var(--dark) 0%, #334155 100%);
        color: white;
        padding: 20px 28px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .admin-card-header h2 {
        font-size: 1.25rem;
        font-weight: 600;
        margin: 0;
      }

      .admin-card-body {
        padding: 28px;
      }

      .form-label {
        font-weight: 600;
        color: var(--dark);
        margin-bottom: 8px;
        font-size: 0.9rem;
      }

      .form-control,
      .form-select {
        border: 2px solid var(--border);
        border-radius: 12px;
        padding: 12px 16px;
        font-weight: 500;
        transition: all 0.2s;
      }

      .form-control:focus,
      .form-select:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 600;
        transition: all 0.3s;
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary) 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
      }

      .btn-success {
        background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 600;
      }

      .btn-danger {
        background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
        border: none;
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 600;
      }

      .btn-outline-primary {
        border: 2px solid var(--primary);
        color: var(--primary);
        border-radius: 12px;
        font-weight: 600;
      }

      .btn-outline-primary:hover {
        background: var(--primary);
      }

      .btn-outline-danger {
        border: 2px solid var(--danger);
        color: var(--danger);
        border-radius: 12px;
        font-weight: 600;
      }

      .btn-outline-danger:hover {
        background: var(--danger);
        color: white;
      }

      .btn-warning {
        background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        border: none;
        border-radius: 12px;
        font-weight: 600;
        color: var(--dark);
      }

      .table {
        margin: 0;
      }

      .table thead th {
        background: #f8fafc;
        border: none;
        padding: 16px;
        font-weight: 700;
        color: var(--dark);
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .table tbody td {
        padding: 18px 16px;
        vertical-align: middle;
        border-bottom: 1px solid var(--border);
      }

      .table tbody tr:last-child td {
        border-bottom: none;
      }

      .table tbody tr:hover {
        background: #f8fafc;
      }

      .product-thumb {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 12px;
      }

      .product-info h6 {
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 4px;
      }

      .product-info span {
        font-size: 0.8rem;
        color: var(--secondary);
      }

      .price-tag {
        font-weight: 700;
        font-size: 1.1rem;
        color: var(--primary);
      }

      .stock-badge {
        padding: 6px 14px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 0.85rem;
      }

      .stock-badge.high {
        background: rgba(22, 163, 74, 0.1);
        color: #16a34a;
      }

      .stock-badge.medium {
        background: rgba(245, 158, 11, 0.1);
        color: #d97706;
      }

      .stock-badge.low {
        background: rgba(220, 38, 38, 0.1);
        color: #dc2626;
      }

      .action-btn {
        width: 38px;
        height: 38px;
        border-radius: 10px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin: 0 4px;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .stat-icon {
        width: 56px;
        height: 56px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .stat-icon.blue {
        background: rgba(37, 99, 235, 0.1);
        color: var(--primary);
      }

      .stat-icon.green {
        background: rgba(22, 163, 74, 0.1);
        color: #16a34a;
      }

      .stat-icon.orange {
        background: rgba(245, 158, 11, 0.1);
        color: #f59e0b;
      }

      .stat-info h3 {
        font-size: 1.75rem;
        font-weight: 700;
        color: var(--dark);
        margin: 0;
      }

      .stat-info p {
        color: var(--secondary);
        margin: 0;
        font-size: 0.9rem;
      }

      .login-container {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .login-card {
        background: white;
        border-radius: 24px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 480px;
        overflow: hidden;
      }

      .login-header {
        background: linear-gradient(135deg, var(--dark) 0%, #334155 100%);
        padding: 40px;
        text-align: center;
        color: white;
      }

      .login-header h2 {
        font-weight: 700;
        margin-bottom: 8px;
      }

      .login-body {
        padding: 40px;
      }

      .toast-container {
        position: fixed;
        bottom: 24px;
        right: 24px;
        z-index: 1100;
      }

      .toast {
        background: white;
        border-radius: 14px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        padding: 18px 24px;
        font-weight: 600;
        animation: fadeInUp 0.3s ease;
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(24px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (max-width: 991px) {
        .admin-sidebar {
          display: none;
        }
        .admin-main {
          margin-left: 0;
          padding: 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Login Section -->
    <div id="loginSection" class="login-container">
      <div class="login-card">
        <div class="login-header">
          <i class="bi bi-laptop fs-1 mb-3 d-block"></i>
          <h2>CELULEX Admin</h2>
          <p class="mb-0 opacity-75">Panel de administración</p>
        </div>
        <div class="login-body">
          <form id="loginForm">
            <div class="mb-4">
              <label class="form-label">Usuario</label>
              <div class="input-group">
                <span class="input-group-text bg-light border-end-0"><i class="bi bi-person"></i></span>
                <input required type="text" class="form-control border-start-0" name="username" placeholder="admin" />
              </div>
            </div>
            <div class="mb-4">
              <label class="form-label">Contraseña</label>
              <div class="input-group">
                <span class="input-group-text bg-light border-end-0"><i class="bi bi-lock"></i></span>
                <input required type="password" class="form-control border-start-0" name="password" placeholder="••••••••" />
              </div>
            </div>
            <button class="btn btn-primary w-100 py-3" type="submit">
              <i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesión
            </button>
          </form>
          <p class="text-center text-muted mt-4 mb-0">
            <small>Credenciales: admin / celulex123</small>
          </p>
        </div>
      </div>
    </div>

    <!-- Admin Section -->
    <div id="adminSection" class="d-none">
      <!-- Sidebar -->
      <aside class="admin-sidebar">
        <div class="brand">
          <i class="bi bi-laptop"></i>
          CELULEX
        </div>
        <nav class="nav flex-column">
          <a class="nav-link active" href="#">
            <i class="bi bi-grid"></i>
            Dashboard
          </a>
          <a class="nav-link" href="#productsSection">
            <i class="bi bi-box-seam"></i>
            Productos
          </a>
          <a class="nav-link" href="/">
            <i class="bi bi-shop"></i>
            Ver tienda
          </a>
        </nav>
        <div class="mt-auto">
          <button id="logoutBtn" class="btn btn-outline-light w-100">
            <i class="bi bi-box-arrow-left me-2"></i>Cerrar sesión
          </button>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="admin-main">
        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon blue">
              <i class="bi bi-box-seam"></i>
            </div>
            <div class="stat-info">
              <h3 id="totalProducts">0</h3>
              <p>Total Productos</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">
              <i class="bi bi-currency-dollar"></i>
            </div>
            <div class="stat-info">
              <h3 id="totalStock">0</h3>
              <p>Stock Total</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange">
              <i class="bi bi-people"></i>
            </div>
            <div class="stat-info">
              <h3>5000+</h3>
              <p>Clientes</p>
            </div>
          </div>
        </div>

        <!-- Add/Edit Product -->
        <div class="admin-card mb-4">
          <div class="admin-card-header">
            <h2><i class="bi bi-plus-circle me-2"></i>Agregar / Editar Producto</h2>
            <button id="cancelEdit" class="btn btn-outline-light btn-sm d-none">
              <i class="bi bi-x-lg me-1"></i>Cancelar
            </button>
          </div>
          <div class="admin-card-body">
            <form id="productForm">
              <input type="hidden" name="id" />
              <div class="row g-4">
                <div class="col-md-6">
                  <label class="form-label">Nombre del producto</label>
                  <input required name="name" class="form-control" placeholder="iPhone 15 Pro" />
                </div>
                <div class="col-md-3">
                  <label class="form-label">Marca</label>
                  <input required name="brand" class="form-control" placeholder="Apple" />
                </div>
                <div class="col-md-3">
                  <label class="form-label">Precio (USD)</label>
                  <input required name="price" type="number" min="1" class="form-control" placeholder="1299" />
                </div>
                <div class="col-md-4">
                  <label class="form-label">Stock</label>
                  <input required name="stock" type="number" min="0" class="form-control" placeholder="10" />
                </div>
                <div class="col-md-8">
                  <label class="form-label">URL de imagen</label>
                  <input required name="image" type="url" class="form-control" placeholder="https://..." />
                </div>
                <div class="col-12">
                  <label class="form-label">Descripción</label>
                  <textarea required name="description" rows="2" class="form-control" placeholder="Descripción del producto..."></textarea>
                </div>
                <div class="col-12">
                  <button class="btn btn-primary" type="submit">
                    <i class="bi bi-check-lg me-2"></i>Guardar Producto
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>

        <!-- Products Table -->
        <div class="admin-card" id="productsSection">
          <div class="admin-card-header">
            <h2><i class="bi bi-list-ul me-2"></i>Productos Registrados</h2>
            <span class="badge bg-light text-dark" id="productCount">0 productos</span>
          </div>
          <div class="admin-card-body p-0">
            <div class="table-responsive">
              <table class="table mb-0">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Producto</th>
                    <th>Precio</th>
                    <th>Stock</th>
                    <th class="text-end">Acciones</th>
                  </tr>
                </thead>
                <tbody id="adminProducts"></tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/admin.js"></script>
  </body>
</html>
